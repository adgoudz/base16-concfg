base16-concfg
=============

The real Chris Kempson's [base16](https://github.com/chriskempson/base16)
for [concfg](https://github.com/lukesampson/concfg),
which is utility to import and export Windows console settings bundled with
[Scoop](https://github.com/lukesampson/scoop),
a command-line installer for Windows created by Luke Sampson.

**NOTE:** All presets in this repository are generated by a base16-builder,
I use [base16-builder-typescript].

About the Color Mapping
-----------------------

Windows Console (conhost.exe/cmd.exe/Powershell) only use 16 colors palette,
therefore [base16](http://chriskempson.com/projects/base16/),
which is based on sixteen colours, would be the best themes solution.

But there are color mapping difference between Windows Console and other terminals or applications.
The colors of Windows Console doesn't map the [ANSI escape color], explained [here].
We should treat those most `dark_` colors as major (normal) colors and 
other as minor (bright) colors. **Only Windows 10 TH2+ support ANSI Escape Sequences.**

| ANSI/VT name   | ANSI/VT FG Code | ANSI/VT BG Code | cmd.exe      | PowerShell  | ColorTable |
|----------------|-----------------|-----------------|--------------|-------------|------------|
| Black          | \x1b[30m        | \x1b[40m        | Black        | Black       | 00         |
| Red            | \x1b[31m        | \x1b[41m        | Red          | DarkRed     | 04         |
| Green          | \x1b[32m        | \x1b[42m        | Green        | DarkGreen   | 02         |
| Yellow         | \x1b[33m        | \x1b[43m        | Yellow       | DarkYellow  | 06         |
| Blue           | \x1b[34m        | \x1b[44m        | Blue         | DarkBlue    | 01         |
| Magenta        | \x1b[35m        | \x1b[45m        | Purple       | DarkMagenta | 05         |
| Cyan           | \x1b[36m        | \x1b[46m        | Aqua         | DarkCyan    | 03         |
| White          | \x1b[37m        | \x1b[47m        | White        | Gray        | 07         |
| Bright Black   | \x1b[90m        | \x1b[100m       | Gray         | DarkGray    | 08         |
| Bright Red     | \x1b[91m        | \x1b[101m       | Light Red    | Red         | 12         |
| Bright Green   | \x1b[92m        | \x1b[102m       | Light Green  | Green       | 10         |
| Bright Yellow  | \x1b[93m        | \x1b[103m       | Light Yellow | Yellow      | 14         |
| Bright Blue    | \x1b[94m        | \x1b[104m       | Light Blue   | Blue        | 09         |
| Bright Magenta | \x1b[95m        | \x1b[105m       | Light Purple | Magenta     | 13         |
| Bright Cyan    | \x1b[96m        | \x1b[106m       | Light Aqua   | Cyan        | 11         |
| Bright White   | \x1b[97m        | \x1b[107m       | Brigh tWhite | White       | 15         |

To determine that if a theme's color mapping is correct, execute `git diff` in
a dirty git directory, and see the diff result. **Might** correct if the diff colors are
red & green, otherwise incorrect definitely.

### About command line token colors

Since PowerShell 5, the new [PSReadline] brings command line tokens colours feature,
the token (e.g. String, Parameter) of command line has its own color, execute
`Get-PSReadlineOption` in PowerShell then you will see some attributes like
`KeywordForegroundColor`, `ParameterForegroundColor`. They have default values,
but these values don't match the theme color mapping very well, and cause bad
readability to commands, there is a discussion [here](https://github.com/lukesampson/concfg/issues/10).

To improve the readability or the whole style of theming, we have to use [Set-PSReadlineOption]
to change the command line tokens colours. Below are two screenshots show the difference
(see those two commands). Take a look at [`command-line-token-color-mapping.ps1`](scripts/command-line-token-color-mapping.ps1) in the scripts
directory for more information.

**NOTE**: the `command-line-token-color-mapping.ps1` script has been [integrated](https://github.com/lukesampson/concfg/pull/46) into [concfg](https://github.com/lukesampson/concfg), you could use `concfg tokencolor` command to set up the command line token colors.

| Default token colors | Matching token colors |
|----------------------|-----------------------|
| ![without-token-color-mapping.png](docs/without-token-color-mapping.png) | ![with-token-color-mapping.png](docs/with-token-color-mapping.png) |


Build
-----

1. Install build tool, for example:

``` powershell
yarn global add base16-builder-typescript
```

2. Create workspace and clone base16 sources, follow [base16-builder-typescript] build guides.

Usage
-----

Quick start example:

1. color scheme
``` powershell
concfg import https://raw.githubusercontent.com/h404bi/base16-concfg/master/presets/base16-solarized-dark.json
```

2. some basic settings (optional)
``` powershell
concfg import https://raw.githubusercontent.com/h404bi/base16-concfg/master/presets/basic.json
```

For advanced usage, please follow [concfg](https://github.com/lukesampson/concfg) guide/help to import presets.

``` powershell
concfg help
```

License
-------

MIT @ [Chawye Hsu](https://h404bi.com)

[Set-PSReadlineOption]: https://docs.microsoft.com/en-us/powershell/module/psreadline/Set-PSReadlineOption
[PSReadline]: https://docs.microsoft.com/en-us/powershell/module/psreadline/
[base16-builder-typescript]: https://github.com/golf1052/base16-builder-typescript
[ANSI escape color]: https://en.wikipedia.org/wiki/ANSI_escape_code#Colors
[here]: https://github.com/dotnet/corefx/blob/5e36ca02d2594f715da829aafaf7af2b554dfcdf/src/System.Console/src/System/ConsolePal.Unix.cs#L577-L603
[base16 styling guidelines]: https://github.com/chriskempson/base16/blob/master/styling.md
